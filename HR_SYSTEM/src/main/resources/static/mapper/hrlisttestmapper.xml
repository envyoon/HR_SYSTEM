<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.precursor.hrsystem.mvc.hrlist.a03_dao.HrListDao">

	<!-- 일반 쿼리 (리스트 출력)  
	<select id="getHrList" resultType="HrListTestVO" parameterType="HrListTestVO">
		select im_key, im_user_name_kr, im_user_name_en, im_user_rank, im_dept, im_hire_date, birymd
		from human_resource
		order by im_key asc
	</select>
	-->
	
	<!-- 전체 인원수 확인하는 쿼리 -->
	<select id="totCnt"  parameterType="boardSch" resultType="int">
			select count(*)
			from human_resource
			where 1=1
	</select>
	
	
	<!-- 페이징 처리 추가된 쿼리 -->
	<select id="getHrList" resultType="HrListTestVO" parameterType="boardSch">
		select *
		from (
			select rownum cnt, level, h.* 
			from human_resource h
			where 1=1
			START WITH refno=0
			CONNECT BY PRIOR no=refno
			ORDER siblings BY no desc )
			where cnt between #{start} and #{end}
	</select>
	
	
	
	
	<!-- 회원 정보 SQL (페이징 처리)
	<select id="getMemberList" resultType="member" parameterType="member">
		select *
		from pmsmember
		where name like '%' || #{name} || '%'
		ORDER BY MEM_NUM asc
	</select>
	-->
	
	
	
	
	
	
	<!-- 
	<insert id="getHrList" parameterType="HrListTest">
    <selectKey order="BEFORE" keyProperty="IM_KEY" resultType="int">
        select 
            to_number(to_char(sysdate,'YYMMDD') || nvl(to_char(max(substr(IM_KEY,7))),'0000'))+1
        from
            HUMAN_RESOURCE
         where
            to_char(sales_date,'YYYYMMDD') = to_char(sysdate,'YYYYMMDD')
    </selectKey>
    insert
        into STSBOOT.HUMAN_RESOURCE
            (IM_KEY, IM_USER_ID, IM_USER_NAME_KR, IM_USER_NAME_EN, IM_USER_RANK, IM_DEPT, IM_USER_MAIL, IM_PHONE_NUM, IM_HIRE_DATE, IM_UPDATE, IM_USER_PW, IM_FLAG, IM_STATUS, ERCO_YMD, RTRM_YMD, BIRYMD)
        values
            (#{IM_KEY}, #{IM_USER_ID}, #{IM_USER_NAME_KR}, #{IM_USER_NAME_EN}, #{IM_USER_RANK}, #{IM_DEPT}, #{IM_USER_MAIL}, #{IM_PHONE_NUM}, #{IM_HIRE_DATE}, #{IM_UPDATE}, #{IM_USER_PW}, #{IM_FLAG}, #{IM_STATUS}, #{ERCO_YMD}, #{RTRM_YMD}, #{BIRYMD})
	</insert>
	 -->
	
</mapper>